use metaverse_messages::packet::{packet::Packet, packet_types::PacketType};
use uuid::{Uuid, uuid};

const DEFAULT_USER_APPEARANCE: [u8; 326] = [
    192, 0, 0, 0, 5, 0, 255, 255, 0, 158, 157, 193, 139, 177, 4, 79, 76, 104, 144, 107, 44, 182, 8,
    178, 225, 151, 0, 64, 0, 194, 40, 209, 207, 75, 93, 75, 168, 132, 244, 137, 154, 7, 150, 170,
    151, 0, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 218, 33, 61, 85, 23, 58, 127, 63,
    85, 63, 42, 0, 85, 63, 36, 85, 95, 153, 63, 34, 0, 63, 109, 88, 132, 63, 136, 81, 85, 103, 136,
    127, 0, 203, 0, 0, 127, 0, 0, 0, 0, 0, 127, 0, 0, 255, 127, 114, 127, 99, 63, 127, 140, 127,
    127, 0, 0, 0, 191, 0, 104, 0, 0, 0, 0, 0, 0, 0, 0, 0, 145, 216, 133, 0, 127, 0, 127, 170, 0, 0,
    127, 127, 109, 0, 127, 127, 63, 85, 42, 100, 216, 214, 204, 204, 204, 51, 25, 89, 76, 204, 0,
    127, 0, 0, 144, 85, 127, 132, 127, 85, 0, 127, 127, 127, 127, 127, 127, 59, 127, 85, 127, 127,
    106, 47, 79, 127, 127, 204, 2, 141, 66, 0, 0, 127, 127, 0, 0, 0, 0, 127, 0, 159, 0, 0, 178,
    127, 36, 85, 131, 127, 127, 127, 153, 95, 0, 140, 74, 27, 127, 127, 0, 214, 204, 198, 0, 0, 63,
    30, 127, 165, 209, 198, 127, 127, 153, 204, 51, 51, 255, 255, 255, 204, 0, 255, 255, 255, 255,
    255, 255, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 0, 127, 127, 255, 25, 100, 255,
    255, 255, 255, 84, 0, 0, 0, 51, 132, 255, 255, 255, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
];
const TEST_USER_APPEARANCE: [u8; 361] = [
    192, 0, 0, 1, 30, 0, 255, 255, 0, 158, 249, 99, 96, 226, 136, 59, 78, 173, 184, 106, 65, 188,
    211, 226, 21, 80, 0, 64, 0, 194, 40, 209, 207, 75, 93, 75, 168, 132, 244, 137, 154, 7, 150,
    170, 151, 0, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 253, 33, 61, 85, 23, 58, 127,
    63, 85, 63, 42, 0, 85, 63, 36, 85, 95, 153, 63, 34, 0, 63, 109, 88, 132, 63, 136, 81, 85, 103,
    136, 127, 0, 150, 0, 0, 127, 0, 0, 0, 0, 0, 127, 0, 0, 255, 127, 114, 127, 99, 63, 127, 140,
    127, 127, 0, 0, 0, 191, 0, 104, 0, 0, 0, 0, 0, 0, 0, 0, 0, 145, 216, 133, 0, 127, 0, 127, 170,
    0, 0, 127, 127, 109, 85, 127, 127, 63, 85, 42, 150, 150, 150, 150, 150, 150, 150, 25, 150, 150,
    150, 0, 127, 0, 0, 144, 85, 127, 132, 127, 85, 0, 127, 127, 127, 127, 127, 127, 59, 127, 85,
    127, 127, 106, 47, 79, 127, 127, 204, 2, 141, 66, 0, 0, 127, 127, 0, 0, 0, 0, 127, 0, 159, 0,
    0, 178, 127, 36, 85, 131, 127, 127, 127, 153, 95, 0, 140, 74, 27, 127, 127, 0, 150, 150, 198,
    0, 0, 63, 30, 127, 165, 209, 198, 127, 127, 153, 204, 51, 51, 255, 255, 255, 204, 0, 255, 150,
    150, 150, 150, 150, 150, 150, 150, 150, 150, 0, 150, 150, 150, 150, 150, 0, 127, 127, 150, 150,
    150, 150, 150, 150, 150, 150, 0, 0, 150, 51, 132, 150, 150, 150, 0, 0, 25, 0, 25, 23, 51, 0,
    25, 23, 51, 0, 0, 25, 0, 25, 23, 51, 0, 0, 25, 0, 25, 23, 51, 0, 25, 23, 51, 0, 25, 23, 51, 0,
    127, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
];

const TEST_USER_ID: Uuid = uuid!("f96360e2883b4eadb86a41bcd3e21550");
const DEFAULT_USER_ID: Uuid = uuid!("9dc18bb1044f4c68906b2cb608b2e197");

/// ensures the AvatarAppearance packet parses correctly. The AvatarAppearance packet is currently
/// unused.
#[test]
pub fn test_parse_avatar_appearance() {
    let default_user = Packet::from_bytes(&DEFAULT_USER_APPEARANCE).unwrap();
    let test_user = Packet::from_bytes(&TEST_USER_APPEARANCE).unwrap();
    match default_user.body {
        PacketType::AvatarAppearance(avatar) => {
            assert_eq!(avatar.id, DEFAULT_USER_ID);
        }
        _ => assert!(false),
    }

    match test_user.body {
        PacketType::AvatarAppearance(avatar) => {
            assert_eq!(avatar.id, TEST_USER_ID);
        }
        _ => assert!(false),
    }
}
